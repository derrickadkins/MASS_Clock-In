<!DOCTYPE html>
<html>
<head>
    <title>MASS Clock-In</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <script src="https://kryogenix.org/code/browser/sorttable/sorttable.js"></script>
</head>
<body>
    <div class="container pt-3">
        <p id="user"></p>
        <button id="googleSignIn" class="btn btn-primary">Sign in with Google</button>
        <button id="logout" class="btn btn-danger">Sign Out</button>
    </div>
    <div class="container pt-3">
        <button id="clockIn" class="btn btn-success">Clock-In</button>
    </div>
    <div class="container pt-3">
        <p id="response"></p>
    </div>
    <div class="container pt-3">
        <table class="table" id="submissionsTable">
            <thead>
                <tr>
                    <th scope="col">User</th>
                    <th scope="col">Time</th>
                    <th scope="col">Place</th>
                </tr>
            </thead>
            <tbody id="submissionsBody">
            </tbody>
        </table>
    </div>

    <script type="module" src="js/index.js"></script>
    <script>
        window.onload = function() {
            // Define a custom sort function.
            sorttable.date_sort = function(a, b) {
                // sort function for sorting dates in 'dd/mm/yyyy, HH:MM:SS AM' format
                aa = a.text.split(', ');
                bb = b.text.split(', ');
                date_a = aa[0].split('/');
                date_b = bb[0].split('/');
                time_a = aa[1].split(':');
                time_b = bb[1].split(':');
                date_a = new Date(date_a[2], date_a[1], date_a[0], time_a[0], time_a[1], time_a[2]);
                date_b = new Date(date_b[2], date_b[1], date_b[0], time_b[0], time_b[1], time_b[2]);
                return date_a - date_b;
            };

            // Add the custom sort function to the sort functions object.
            sorttable.sort_fns['date'] = sorttable.date_sort;

            // Get the 'Time' column.
            var timeColumn = document.querySelector('#submissionsTable thead th:nth-child(2)');

            // Add the 'sorttable_numeric' class to the 'Time' column.
            timeColumn.classList.add('sorttable_date');

            // Make the table sortable.
            sorttable.makeSortable(document.getElementById('submissionsTable'));
        };
    </script>
</body>
</html>
